{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","get","then","dados","map","objeto","Date","data","quantidade","valor","err","Error","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obterNegociacoesDoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","a","b","getTime","catch","console","log"],"mappings":";;;;;;AAASA,iB,sBAAAA,W;;AACAC,gB,iBAAAA,U;;;AAEF,YAAMC,iBAAN,CAAwB;;AAE7BC,sBAAc;AACZ,eAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACD;;AAEDK,mCAA2B;AACzB,iBAAO,KAAKD,KAAL,CACJE,GADI,CACA,oBADA,EAEJC,IAFI,CAGHC,SACEA,MAAMC,GAAN,CAAUC,UACR,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADF,CAJC,EAOHC,OAAO;AACL;AACA,kBAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AAED,WAXE,CAAP;AAaD;;AAEDC,2CAAmC;AACjC,iBAAO,KAAKb,KAAL,CACJE,GADI,CACA,sBADA,EAEJC,IAFI,CAGHC,SAASA,MAAMC,GAAN,CAAUC,UACjB,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADO,CAHN,EAMHC,OAAO;AACL,kBAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AAED,WATE,CAAP;AAWD;;AAEDE,4CAAoC;AAClC,iBAAO,KAAKd,KAAL,CACJE,GADI,CACA,uBADA,EAEJC,IAFI,CAGHC,SAASA,MAAMC,GAAN,CAAUC,UACjB,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADO,CAHN,EAMHC,OAAO;AACL,kBAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AAED,WATE,CAAP;AAWD;;AAEDG,oCAA4B;AAC1B,iBAAOC,QAAQC,GAAR,CAAY,CACjB,KAAKhB,wBAAL,EADiB,EAEjB,KAAKY,gCAAL,EAFiB,EAGjB,KAAKC,iCAAL,EAHiB,CAAZ,EAKJX,IALI,CAKCe,WAAWA,QACdC,MADc,CACP,CAACC,SAAD,EAAYC,IAAZ,KAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CADd,EACsC,EADtC,EAEdE,IAFc,CAET,CAACC,CAAD,EAAIC,CAAJ,KAAUA,EAAEjB,IAAF,CAAOkB,OAAP,KAAmBF,EAAEhB,IAAF,CAAOkB,OAAP,EAFpB,CALZ,EASJC,KATI,CASEhB,OAAO;AACZiB,oBAAQC,GAAR,CAAYlB,GAAZ;;AAEA,kBAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACD,WAbI,CAAP;AAcD;AAjE4B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\n\nexport class NegociacaoService {\n\n  constructor() {\n    this._http = new HttpService();\n  }\n\n  obterNegociacoesDaSemana() {\n    return this._http\n      .get('negociacoes/semana')\n      .then(\n        dados =>\n          dados.map(objeto =>\n            new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n        ,\n        err => {\n          // ATENÇÃO AQUI!\n          throw new Error('Não foi possível obter as negociações da semana');\n\n        }\n      );\n  }\n\n  obterNegociacoesDaSemanaAnterior() {\n    return this._http\n      .get('negociacoes/anterior')\n      .then(\n        dados => dados.map(objeto =>\n          new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n        ,\n        err => {\n          throw new Error('Não foi possível obter as negociações da semana anterior');\n\n        }\n      );\n  }\n\n  obterNegociacoesDaSemanaRetrasada() {\n    return this._http\n      .get('negociacoes/retrasada')\n      .then(\n        dados => dados.map(objeto =>\n          new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n        ,\n        err => {\n          throw new Error('Não foi possível obter as negociações da semana retrasada');\n\n        }\n      );\n  }\n\n  obterNegociacoesDoPeriodo() {\n    return Promise.all([\n      this.obterNegociacoesDaSemana(),\n      this.obterNegociacoesDaSemanaAnterior(),\n      this.obterNegociacoesDaSemanaRetrasada()\n    ])\n      .then(periodo => periodo\n        .reduce((novoArray, item) => novoArray.concat(item), [])\n        .sort((a, b) => b.data.getTime() - a.data.getTime())\n      )\n      .catch(err => {\n        console.log(err);\n\n        throw new Error('Não foi possível obter as negociações do período')\n      });\n  }\n}\n"]}